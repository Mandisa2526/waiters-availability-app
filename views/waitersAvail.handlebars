<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/days.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <!--bootrap4-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <!--bootsrap3-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/greet.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <style>
        #customers th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;

        }

        /*table background color*/
        .green {
            background-color: green;
        }

        .red {
            background-color: red;
        }

        .orange {
            background-color: orange;
        }

        table {
            margin: 0 auto;
        }

        /* Default Table Style */
        table {
            color: #333;
            background: white;
            border: 1px solid grey;
            font-size: 12pt;
            border-collapse: collapse;
        }

        table thead th,
        table tfoot th {
            color: #777;
            background: rgba(0, 0, 0, .1);
        }

        table caption {
            padding: .5em;
        }

        table th,
        table td {
            padding: .5em;
            border: 1px solid lightgrey;
        }

        table {
            border: 1px solid #ddd;
        }

        .div1 {
            width: 50px;
            height: 10px;
            border: 1px solid green;
            background-color: green;

        }

        .div2 {
            width: 50px;
            height: 10px;
            border: 1px solid red;
            background-color: red;
        }

        .div3 {
            width: 50px;
            height: 10px;

            border: 1px solid orange;
            background-color: orange;
        }

        .success {
            color: #228b22;
            font-weight: bold;
            border: solid 2px #bce3bc;
            background: #bce3bc;
            margin: 0 auto;
            border-radius: 5px;
            text-align: center;
            width: 90%;
        }
    </style>
</head>


<body
    style=" background-image: url('https://eu-assets.simpleview-europe.com/englishriviera2017/imageresizer/?image=%2Fdbimgs%2FER%20Gal-Torquay%206-Bistrot%20Pierre%20Restaurants.jpg&action=FeaturedItemsScroll20193x2')">
    <div class="header text-center" style="background-color:#13505B;">
        <h1>Waiters Availability</h1>
    </div>

    <div class="main clearfix">

        <div class="content" style="padding: 1em;margin:1em; background-color:#f8f8f8">
            {{#if messages.success}}
            <div class="message success text-centere">{{messages.success}}</div><br>
            {{/if}}
            <div style="right:20px;">
                <div class="div1"></div>
                <label for="html">Enough Waiters</label><br>

                <div class="div2"></div>
                <label>Over Subscribed waiters</label><br>

                <div class="div3"></div>
                <label>waiters still needed</label>
            </div><br>

            <table class="table text-centere">
                <tr id="customers">
                    <th class="monday">Monday</th>
                    <th class="tuesday">Tuesday</th>
                    <th class="wednesday">Wednesday</th>
                    <th class="thursday">Thursday</th>
                    <th class="friday">Friday</th>
                    <th class="satuday">Saturday</th>
                    <th class="sunday">Sunday</th>
                </tr>

                {{#each days}}
                <tr>
                    <td class="monday">{{#if Monday}}{{@key}}{{/if}}</td>
                    <td class="tuesday">{{#if Tuesday}}{{@key}}{{/if}}</td>
                    <td class="wednesday">{{#if Wednesday}}{{@key}}{{/if}}</td>
                    <td class="thursday">{{#if Thursday}}{{@key}}{{/if}}</td>
                    <td class="friday">{{#if Friday}}{{@key}}{{/if}}</td>
                    <td class="satuday">{{#if Saturday}}{{@key}}{{/if}}</td>
                    <td class="sunday">{{#if Sunday}}{{@key}}{{/if}}</td>
                </tr>

                {{/each}}

            </table>
            <div class="text-center">

                <a class="btn-default btn btn-primary magenta text-center" style="margin:1em;" href="/reset"
                    name="button" onclick="resetBtn()">Reset</a>
                <button class="btn btn-dark text-center" style="margin:1em;"><a href="/">home</a></button>
            </div>

        </div>
    </div>
    <script>
        // Automatically remove flash messages after 3 seconds
        setTimeout(() => {
            const flashMessages = document.querySelectorAll(".message");

            flashMessages.forEach((message) => {
                message.remove();
            });
        }, 3000);

        //background color change

        ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'satuday', 'sunday'].forEach(cssClass => {
            let count = document.querySelectorAll(`td.${cssClass}:not(:empty)`).length;
            console.log(cssClass, count);
            if (count > 3) {
                document.querySelector(`th.${cssClass}`).style.setProperty('background-color', 'red');
            } else if (count == 3) {
                document.querySelector(`th.${cssClass}`).style.setProperty('background-color', 'green');
            } else if (count < 3) {
                document.querySelector(`th.${cssClass}`).style.setProperty('background-color', 'orange');
            }

        })

        //update waiters
    
        
    
    </script>
</body>

</html>